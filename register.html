<!DOCTYPE html>
<html>

<head>
  <title>Register Page</title>
  <link rel="stylesheet" href="register.css" />
</head>

<body>
  <div id="container">
    <div id="register">REGISTER</div>
    <div>
      <form id="form" onsubmit="return register()">
        <div id="divuser">
          <label id="username" style="font-family: Arial, Helvetica, sans-serif">Name</label><br />
          <input type="text" class="input" id="userinput" required />
        </div>
        <div id="divemail">
          <label id="email" style="font-family: Arial, Helvetica, sans-serif">Email</label><br />
          <input type="email" class="input" id="emailinput" required />
        </div>
        <div id="divmobno">
          <label id="mobno" style="font-family: Arial, Helvetica, sans-serif">Mobile Number</label><br />
          <input type="text" class="input" id="numinput" required />
        </div>
        <div id="divcity">
          <label id="city" style="font-family: Arial, Helvetica, sans-serif">City</label><br />
          <input type="text" class="input" id="cityinput" required />
        </div>
        <div id="divstate">
          <label id="state" style="font-family: Arial, Helvetica, sans-serif">State</label><br />
          <input type="text" class="input" id="stateinput" required />
        </div>
        <div id="divpass">
          <label id="pass" style="font-family: Arial, Helvetica, sans-serif">Password</label><br />
          <input type="password" class="input" id="passinput" required />
        </div>
        <div id="button-container">
          <div id="divsubmit">
            <button type="submit" class="button">SUBMIT</button>
          </div>
        </div>
      </form>
      <label id="result" style="font-family: Arial, Helvetica, sans-serif"></label>
    </div>
  </div>
</body>

<script>
  function register() {
    var name = document.getElementById("userinput").value;
    var email = document.getElementById("emailinput").value;
    var phno = document.getElementById("numinput").value;
    var city = document.getElementById("cityinput").value;
    var state = document.getElementById("stateinput").value;
    var password = document.getElementById("passinput").value;
    var result = document.getElementById("result");

    fetch("http://localhost:8080/users", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        name: name,
        email: email,
        phone: phno,
        city: city,
        state: state,
        password: password,
      }),
    })
      .then((response) => {
        if (response.ok) {
          result.innerHTML = "Account Created Successfully";
          window.location.href = "page1.html";
        }
      })
      .catch((error) => {
        result.innerHTML = error + " Cannot create Account";
      });

    return false;
  }
</script>

</html>